<!-- <div class="bg">
  <p-toast position="top-center" key="tc" styleClass="custom-toast"></p-toast>
  <form
    *ngIf="registerMode"
    [formGroup]="registerForm"
    (ngSubmit)="onRegister()"
    class="p-3 form"
  >
    <h3 class="mt-1">Регистрация</h3>
    <div class="mt-4">
      <span class="p-float-label">
        <input
          id="float-input"
          type="text"
          pInputText
          formControlName="firstName"
          (keyup.enter)="focusableLastName.focus()"
        />
        <label for="float-input">Име</label>
      </span>
      <app-form-errors
        [control]="$any(registerForm).get('firstName')"
        [max]="'50'"
        [min]="'2'"
        [controlName]="'Име'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <span class="p-float-label">
        <input
          #focusableLastName
          id="float-input"
          type="text"
          pInputText
          formControlName="lastName"
          (keyup.enter)="focusableUserName.focus()"
        />
        <label for="float-input">Фамилия</label>
      </span>
      <app-form-errors
        [control]="$any(registerForm).get('lastName')"
        [max]="'50'"
        [min]="'2'"
        [controlName]="'Фамилия'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <span class="p-float-label">
        <input
          #focusableUserName
          id="float-input"
          type="text"
          pInputText
          formControlName="userName"
          (keyup.enter)="focusableEmail.focus()"
        />
        <label for="float-input">Потребителско име</label>
      </span>
      <app-form-errors
        [control]="$any(registerForm).get('userName')"
        [max]="'50'"
        [min]="'2'"
        [controlName]="'Потребителско име'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <span class="p-float-label">
        <input
          #focusableEmail
          id="float-input"
          type="email"
          pInputText
          formControlName="email"
          (keyup.enter)="focusablePassword.input.nativeElement.focus()"
        />
        <label for="float-input">Имейл адрес</label>
      </span>
      <app-form-errors
        [control]="$any(registerForm).get('email')"
        [controlName]="'Имейл адрес'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <p-password
        #focusablePassword
        (keyup.enter)="focusableRepeatPassword.input.nativeElement.focus()"
        formControlName="password"
        placeholder="Парола"
        promptLabel=" "
        weakLabel="Паролата е слаба"
        mediumLabel="Паролата е средна"
        strongLabel="Паролата е силна"
        strongRegex="^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).+$"
      >
        <ng-template pTemplate="footer">
          <p class="mt-2">Паролата трябва да съдържа:</p>
          <ul class="pl-2 ml-2 mt-0">
            <li>1 малка буква</li>
            <li>1 главна буква</li>
            <li>1 число</li>
            <li>Минимум 8 знака</li>
          </ul>
        </ng-template>
      </p-password>

      <app-form-errors
        [control]="$any(registerForm).get('password')"
        [max]="'50'"
        [min]="'6'"
        [controlName]="'Парола'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <p-password
        #focusableRepeatPassword
        (keyup.enter)="focusablePhone.focus()"
        formControlName="confirmPassword"
        placeholder="Потвърди парола"
        promptLabel=" "
        weakLabel="Паролата е слаба"
        mediumLabel="Паролата е средна"
        strongLabel="Паролата е силна"
        strongRegex="^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).+$"
      >
        <ng-template pTemplate="footer">
          <p class="mt-2">Паролата трябва да съдържа:</p>
          <ul class="pl-2 ml-2 mt-0">
            <li>1 малка буква</li>
            <li>1 главна буква</li>
            <li>1 число</li>
            <li>Минимум 8 знака</li>
          </ul>
        </ng-template>
      </p-password>

      <span
        *ngIf="registerForm.errors?.['notmatched'] && registerForm.touched"
        class="text-danger"
        >Паролите не съвпадат</span
      >

      <app-form-errors
        [control]="$any(registerForm).get('confirmPassword')"
        [max]="'50'"
        [min]="'6'"
        [controlName]="'Потвърди парола'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <span class="p-float-label">
        <input
          #focusablePhone
          id="float-input"
          type="text"
          pInputText
          formControlName="phoneNumber"
        />
        <label for="float-input">Телефонен номер</label>
      </span>

      <app-form-errors
        [control]="$any(registerForm).get('phoneNumber')"
        [controlName]="'Телефонен номер'"
      ></app-form-errors>
    </div>

    <div class="d-flex justify-content-between">
      <button
        type="button"
        pButton
        pRipple
        label="Назад"
        class="p-button-secondary mt-3 p-1 w-25"
        (click)="registerToggle()"
      ></button>
      <button
        type="submit"
        pButton
        pRipple
        label="Потвърди"
        class="p-button-success mt-3 p-1 w-25"
        [disabled]="!registerForm.valid"
        (click)="onRegister()"
        routerLink="listings/create"
      ></button>
    </div>
  </form>

  <form
    *ngIf="!registerMode"
    [formGroup]="loginForm"
    (ngSubmit)="onLogIn()"
    class="p-3 form"
  >
    <h3 class="mt-1">Влезте в профила си</h3>
    <h6 class="regLink">
      Нямате профил?, регистрирайте се <a (click)="registerToggle()">тук</a>
    </h6>

    <div class="mt-5">
      <span class="p-float-label">
        <input
          id="float-input"
          type="text"
          pInputText
          formControlName="userName"
          (keyup.enter)="focusablePassword.focus()"
        />
        <label for="float-input">Потребителско име</label>
      </span>
      <app-form-errors
        [control]="$any(loginForm).get('userName')"
        [max]="'50'"
        [min]="'2'"
        [controlName]="'Потребителско име'"
      ></app-form-errors>
    </div>

    <div class="mt-4">
      <span class="p-float-label">
        <input
          #focusablePassword
          id="float-input"
          type="password"
          pInputText
          formControlName="password"
        />
        <label for="float-input">Парола</label>
      </span>

      <app-form-errors
        [control]="$any(loginForm).get('password')"
        [max]="'50'"
        [min]="'6'"
        [controlName]="'Парола'"
      ></app-form-errors>
    </div>

    <div class="d-flex justify-content-between">
      <button
        type="button"
        pButton
        pRipple
        label="Назад"
        class="p-button-secondary mt-3 p-1 w-25"
        routerLink="/home"
      ></button>
      <button
        type="submit"
        pButton
        pRipple
        label="Потвърди"
        class="p-button-success mt-3 p-1 w-25"
        [disabled]="!loginForm.valid"
        (click)="onLogIn()"
        routerLink="listings/create"
      ></button>
    </div>
  </form>
</div> -->

<div class="bg py-5">
  <div class="register-container container">
    <h2 class="text-center pt-4">Създайте нов акаунт</h2>
    <form
      [formGroup]="registerForm"
      class="p-sm-5 p-0"
      (ngSubmit)="onRegister()"
    >
      <div class="img-firstname-lastname-container d-flex">
        <div *ngIf="avatar" class="image-wrapper w-75">
          <img [src]="avatar" alt="not found" />
        </div>

        <div
          *ngIf="!avatar"
          class="image-upload w-75 d-flex justify-content-center align-items-center flex-column"
        >
          <input
            id="file-upload"
            type="file"
            accept="image/png, image/jpeg"
            class="form-control"
            multiple=""
            class="imgInput"
            hidden
            (change)="onUploadImage($event)"
          />
          <label
            for="file-upload"
            class="d-flex flex-column justify-content-center align-items-center h-100"
          >
            <i class="pi pi-camera"></i>
            <span class="text-center">Качете снимка</span>
          </label>
        </div>

        <div class="d-flex flex-column w-100 h-100 align-items-between">
          <div class="input-container d-flex flex-column w-100 mt-xxl-3">
            <label>Име</label>
            <input
              formControlName="firstName"
              type="text"
              class="form-input"
              (keyup.enter)="focusableLastName.focus()"
              #focusableFirstName
            />
            <i class="pi pi-check-square"></i>
            <app-form-errors
              [control]="$any(registerForm).get('firstName')"
              [max]="'50'"
              [min]="'2'"
              [controlName]="'Име'"
            ></app-form-errors>
          </div>
          <div class="input-container d-flex flex-column w-100 mt-xxl-4">
            <label>Фамилия</label>
            <input
              formControlName="lastName"
              type="text"
              class="form-input"
              (keyup.enter)="focusableUserName.focus()"
              #focusableLastName
            />
            <i class="pi pi-check-square"></i>
            <app-form-errors
              [control]="$any(registerForm).get('lastName')"
              [max]="'50'"
              [min]="'2'"
              [controlName]="'Фамилия'"
            ></app-form-errors>
          </div>
        </div>
      </div>

      <div class="username-container d-flex">
        <div class="input-container d-flex flex-column w-100">
          <label>Потребителско име</label>
          <input
            formControlName="userName"
            type="text"
            class="form-input"
            #focusableUserName
            (keyup.enter)="focusablePassword.focus()"
          />
          <i class="pi pi-check-square"></i>
          <app-form-errors
            [control]="$any(registerForm).get('userName')"
            [max]="'50'"
            [min]="'2'"
            [controlName]="'Потребителско име'"
          ></app-form-errors>
        </div>
      </div>

      <div class="password-container">
        <div class="input-container d-flex flex-column w-100">
          <label>Парола</label>
          <input
            type="password"
            class="form-input"
            formControlName="password"
            (keyup.enter)="focusableConfirmPassword.focus()"
            #focusablePassword
          />
          <i class="pi pi-check-square"></i>
          <app-form-errors
            [control]="$any(registerForm).get('password')"
            [max]="'50'"
            [min]="'6'"
            [controlName]="'Парола'"
          ></app-form-errors>
        </div>
        <div class="input-container d-flex flex-column w-100">
          <label>Потвърди парола</label>
          <input
            type="password"
            class="form-input"
            formControlName="confirmPassword"
            (keyup.enter)="focusableEmail.focus()"
            #focusableConfirmPassword
          />
          <i class="pi pi-check-square"></i>
          <app-form-errors
            [control]="$any(registerForm).get('confirmPassword')"
            [max]="'50'"
            [min]="'6'"
            [controlName]="'Потвърди парола'"
          ></app-form-errors>
        </div>
      </div>

      <div class="email-phone-container d-flex">
        <div class="input-container d-flex flex-column w-100">
          <label>Имейл адрес</label>
          <input
            type="email"
            class="form-input"
            formControlName="email"
            placeholder="example@eclipsemarket.com"
            (keyup.enter)="focusablePhone.focus()"
            #focusableEmail
          />
          <i class="pi pi-check-square"></i>
          <app-form-errors
            [control]="$any(registerForm).get('email')"
            [controlName]="'Имейл адрес'"
          ></app-form-errors>
        </div>
        <div class="input-container d-flex flex-column w-100">
          <label>Телефонен номер</label>
          <input
            type="text"
            class="form-input"
            #focusablePhone
            (keyup.enter)="focusableSubmitButton.focus()"
          />
          <i class="pi pi-check-square"></i>
          <app-form-errors
            [control]="$any(registerForm).get('phoneNumber')"
            [controlName]="'Телефонен номер'"
          ></app-form-errors>
        </div>
      </div>

      <div class="btn-container d-flex justify-content-around">
        <button
          type="button"
          pButton
          pRipple
          label="Назад"
          class="p-button-primary mt-3 p-1 w-25"
          (click)="registerToggle()"
        ></button>
        <button
          #focusableSubmitButton
          type="submit"
          pButton
          pRipple
          label="Потвърди"
          class="p-button-success mt-3 p-2 w-25"
          [disabled]="!registerForm.valid"
          (click)="onRegister()"
          routerLink="listings/create"
        ></button>
      </div>
    </form>
  </div>
</div>
